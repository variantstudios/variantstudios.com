!function(t,n,e,o){"use strict";var r=t("html, body"),a=n.console||!1,i={anchors:"a",prefetch:!1,blacklist:".no-smoothstate, [target]",development:!1,pageCacheSize:0,alterRequestUrl:function(t){return t},onStart:{duration:0,render:function(t,n){r.scrollTop(0)}},onProgress:{duration:0,render:function(t,n){r.css("cursor","wait"),r.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(t,n,e){r.css("cursor","auto"),r.find("a").css("cursor","auto"),n.html(e)}},callback:function(t,n,e){}},s={isExternal:function(t){var n=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof n[1]&&n[1].length>0&&n[1].toLowerCase()!==location.protocol?!0:"string"==typeof n[2]&&n[2].length>0&&n[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host?!0:!1},isHash:function(t){var e=t.indexOf(n.location.pathname)>0?!0:!1,o=t.indexOf("#")>0?!0:!1;return e&&o?!0:!1},shouldLoad:function(t,n){var e=t.prop("href");return!s.isExternal(e)&&!s.isHash(e)&&!t.is(n)},htmlDoc:function(n){var e,o=t(),r=/<(\/?)(html|head|body|title|base|meta)(\s+[^>]*)?>/gi,a="ss"+Math.round(1e5*Math.random()),i=n.replace(r,function(n,e,r,i){var s={};return e||(o=o.add("<"+r+"/>"),i&&t.each(t("<div"+i+"/>")[0].attributes,function(t,n){s[n.name]=n.value}),o.eq(-1).attr(s)),"<"+e+"div"+(e?"":' id="'+a+(o.length-1)+'"')+">"});return o.length?(e||(e=t("<div/>")),e.html(i),t.each(o,function(t){var n=e.find("#"+a+t).before(o[t]);o.eq(t).html(n.contents()),n.remove()}),e.children().unwrap()):t(n)},clearIfOverCapacity:function(t,n){return Object.keys||(Object.keys=function(t){var n,e=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),Object.keys(t).length>n&&(t={}),t},getContentById:function(n,e){e=e instanceof jQuery?e:s.htmlDoc(e);var o=e.find(n),r=o.length?t.trim(o.html()):e.filter(n).html(),a=r.length?t(r):null;return a},storePageIn:function(t,n,e){return e=e instanceof jQuery?e:s.htmlDoc(e),t[n]={status:"loaded",title:e.find("title").text(),html:e},t},triggerAllAnimationEndEvent:function(n,e){e=" "+e||"";var o=0,r="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",i="allanimationend",c=function(e){t(e.delegateTarget).is(n)&&(e.stopPropagation(),o++)},u=function(e){t(e.delegateTarget).is(n)&&(e.stopPropagation(),o--,0===o&&n.trigger(i))};n.on(r,c),n.on(a,u),n.on("allanimationend"+e,function(t){o=0,s.redraw(n)})},redraw:function(t){t.height(0),setTimeout(function(){t.height("auto")},0)}},c=function(e){if(null!==e.state){var o=n.location.href,r=t("#"+e.state.id),a=r.data("smoothState");a.href===o||s.isHash(o)||a.load(o,!0)}},u=function(o,r){var c=t(o),u={},l=n.location.href,d=function(t,e){e=e||!1;var o=!1,a=!1,i={loaded:function(){var n=o?"ss.onProgressEnd":"ss.onStartEnd";a&&o?a&&h(t):c.one(n,function(){h(t)}),e||history.pushState({id:c.prop("id")},u[t].title,t)},fetching:function(){o||(o=!0,c.one("ss.onStartEnd",function(){r.onProgress.render(t,c,null),setTimeout(function(){c.trigger("ss.onProgressEnd"),a=!0},r.onStart.duration)})),setTimeout(function(){u.hasOwnProperty(t)&&i[u[t].status]()},10)},error:function(){n.location=t}};u.hasOwnProperty(t)||f(t),r.onStart.render(t,c,null),setTimeout(function(){c.trigger("ss.onStartEnd")},r.onStart.duration),i[u[t].status]()},h=function(t){var o="#"+c.prop("id"),i=u[t]?s.getContentById(o,u[t].html):null;i?(e.title=u[t].title,c.data("smoothState").href=t,r.onEnd.render(t,c,i),c.one("ss.onEndEnd",function(){r.callback(t,c,i)}),setTimeout(function(){c.trigger("ss.onEndEnd")},r.onEnd.duration)):!i&&r.development&&a?a.warn("No element with an id of '"+o+"' in response from "+t+" in "+u):n.location=t},f=function(n){if(!u.hasOwnProperty(n)){u=s.clearIfOverCapacity(u,r.pageCacheSize),u[n]={status:"fetching"};var e=r.alterRequestUrl(n)||n,o=t.ajax(e);o.success(function(t){s.storePageIn(u,n,t),c.data("smoothState").cache=u}),o.error(function(){u[n].status="error"})}},m=function(n){var e=t(n.currentTarget),o=e.prop("href");s.shouldLoad(e,r.blacklist)&&(n.stopPropagation(),f(o))},g=function(n){var e=t(n.currentTarget),o=e.prop("href");t(n.delegateTarget);n.metaKey||n.ctrlKey||!s.shouldLoad(e,r.blacklist)||(n.stopPropagation(),n.preventDefault(),d(o))},p=function(t){t.on("click",r.anchors,g),r.prefetch&&t.on("mouseover touchstart",r.anchors,m)},v=function(t){var n=c.addClass(t).prop("class");c.removeClass(n),setTimeout(function(){c.addClass(n)},0),c.one("ss.onStartEnd ss.onProgressEnd ss.onEndEnd",function(){c.removeClass(t)})};return r=t.extend(i,r),null===history.state&&history.replaceState({id:c.prop("id")},e.title,l),s.storePageIn(u,l,e.documentElement.outerHTML),s.triggerAllAnimationEndEvent(c,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),p(c),{href:l,cache:u,load:d,fetch:f,toggleAnimationClass:v}},l=function(n){return this.each(function(){this.id&&!t.data(this,"smoothState")?t.data(this,"smoothState",new u(this,n)):!this.id&&a&&a.warn("Every smoothState container needs an id but the following one does not have one:",this)})};n.onpopstate=c,t.smoothStateUtility=s,t.fn.smoothState=l}(jQuery,window,document);